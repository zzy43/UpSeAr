<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>圆通航空 · 机场性能工具</title>
    <!-- 外部CSS -->
    <link rel="stylesheet" href="style.css">
    <!-- 数据文件 -->
    <script src="./zshc-data.js"></script>
    <script src="./zppp-data.js"></script>
    <!-- 主JS文件 - 使用defer确保在DOM加载后执行 -->
    <script src="./main.js" defer></script>
</head>
<body>
    <div class="card">
        <!-- 头部Logo区 -->
        <div class="header">
            <div style="display: flex; align-items: center; gap: 16px;">
                <div class="logo">
                    <img src="logo.png" alt="圆通航空" style="height: 40px; width: auto;">
                </div>
                <span class="airport" id="airportTitle">ZSHC</span>
                <span class="badge">✈ 襟翼 05</span>
                <!-- <span class="badge">建议用杭州22auto数据进行测试</span>
                <span class="badge">测试防冰开的逻辑是否有问题</span>
                <span class="badge">飞机号暂时未上传数据</span> -->
            </div>
            <div id="dataStatus" class="status-text">⏳ 加载数据...</div>
        </div>

        <!-- 交互控制区 -->
        <div class="controls">
            <!-- 飞机选择框 - 放在最前面 -->
            <div class="ctrl-group">
                <span class="ctrl-label">✈️ 飞机</span>
                <select id="aircraftSelect" style="width: 140px;">
                    <option value="">-- 请选择飞机 --</option>
                    <option value="B2853">B2853</option>
                </select>
            </div>
            <div class="ctrl-group">
                <span class="ctrl-label">📍 机场</span>
                <select id="airportSelect" style="width: 220px;">
                    <option value="">-- 请选择机场 --</option>
                    <option value="ZSHC" selected>ZSHC 杭州萧山</option>
                    <option value="ZPPP">ZPPP 昆明长水</option>
                </select>
            </div>
            <div class="ctrl-group">
                <span class="ctrl-label">🛫 跑道</span>
                <div class="btn-group" id="runwayGroup">
                    <button class="btn active" data-runway="22">22</button>
                    <button class="btn" data-runway="06">06</button>
                </div>
            </div>
            <div class="ctrl-group">
                <span class="ctrl-label">❄️ 空调</span>
                <div class="btn-group" id="acGroup">
                    <button class="btn" data-ac="off">OFF</button>
                    <button class="btn active" data-ac="auto">AUTO</button>
                </div>
            </div>
            <div class="ctrl-group">
                <span class="ctrl-label">🧊 防冰</span>
                <div class="btn-group" id="antiIceGroup">
                    <button class="btn active" data-antiice="off">OFF</button>
                    <button class="btn" data-antiice="on">ON</button>
                </div>
            </div>
            <div class="ctrl-group">
                <span class="ctrl-label">🛣️ 道面</span>
                <div class="btn-group" id="surfaceGroup">
                    <button class="btn active" data-surface="dry">干跑道</button>
                    <button class="btn" data-surface="wet">湿跑道</button>
                </div>
            </div>
            <div class="ctrl-group">
                <span class="ctrl-label">⚖️ 重量</span>
                <input type="number" id="weightInput" placeholder="输入起飞重量" value="" step="0.1" style="width:160px;">
                <span style="color: #4f6a7c;">kg</span>
            </div>
            <div class="ctrl-group">
                <span class="ctrl-label">💨 风速</span>
                <select id="windSelect" style="width: 180px;">
                    <option value="">-- 请选择风速 --</option>
                    <option value="顶风-10">顶风 -10 kts</option>
                    <option value="顶风0">顶风 0 kts</option>
                    <option value="顶风+5">顶风 +5 kts</option>
                    <option value="顶风+10">顶风 +10 kts</option>
                </select>
            </div>
            <div class="ctrl-group">
                <span class="ctrl-label">🌡️ 当前温度</span>
                <input type="number" id="currentTempInput" class="temp-input" placeholder="OAT" value="" step="1" style="width:130px;">
                <span>°C</span>
            </div>
            <div class="ctrl-group">
                <span class="ctrl-label">📊 QNH</span>
                <input type="number" id="qnhInput" placeholder="QNH" value="" step="1" style="width:120px;">
                <span style="color: #4f6a7c;">hPa</span>
            </div>
        </div>

        <!-- 当前状态信息栏 - 增加飞机显示和防冰显示 -->
        <div class="info-panel" id="infoPanel">
            <div class="info-item">✈️ 飞机: <span id="aircraftDisplay" style="font-weight: 700;">未选择</span></div>
            <div class="info-item">📍 机场: <span id="airportDisplay" style="font-weight: 700;">ZSHC</span></div>
            <div class="info-item">📊 跑道: <span id="runwayDisplay" style="font-weight: 700;">22</span></div>
            <div class="info-item">❄️ 空调: <span id="acDisplay" style="font-weight: 700;">AUTO</span></div>
            <div class="info-item">🧊 防冰: <span id="antiIceDisplay" style="font-weight: 700;">OFF</span></div>
            <div class="info-item">🛣️ 道面: <span id="surfaceDisplay" style="font-weight: 700;">干跑道</span></div>
            <div class="info-item">⚖️ 输入重量: <span id="weightDisplay" style="font-weight: 700;">未输入</span></div>
            <div class="info-item">📊 QNH: <span id="qnhDisplay" style="font-weight: 700;">未输入</span></div>
            <div class="info-item">💨 风速: <span id="windDisplay" style="font-weight: 700; color: #1f69c9;">未选择</span></div>
            <div class="info-item">🌡️ OAT: <span id="tempDisplay" style="font-weight: 700;">未输入</span></div>
            <div class="info-item" id="matchStatus">⏳ 请填写参数</div>
        </div>

        <!-- 表格容器 -->
        <div id="tableContainer" class="table-container">
            <div style="padding: 50px; text-align: center; color: #54738c;">📋 请选择参数</div>
        </div>
        
        <!-- 图例说明 -->
        <div class="footnote">
            <div class="legend" id="legendArea">
                <div class="legend-item"><span class="color-dot"></span> 黄色高亮: 满足爬升+限制且温度最高</div>
                <div class="legend-item"><span class="dot-red"></span> 红色行: 性能温度 &lt; 当前温度</div>
                <div class="legend-item" id="wetLegend" style="display:none;"><span class="dot-green-bg"></span> 湿跑道模式</div>
            </div>
            <div>⚠️ 黄色输入框 = 必填项未填/重量＜555kg/QNH未填/飞机未选</div>
        </div>
    </div>
</body>
</html>